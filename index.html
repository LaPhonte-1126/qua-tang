<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√∫c M·∫π 20-10 üíñ</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: radial-gradient(circle at center, #fff0f5 0%, #ffe4ec 40%, #ffd6e8 80%);
    font-family: 'Brush Script MT', cursive;
    text-align: center;
    color: #e91e63;
  }

  h1 {
    margin-top: 20vh;
    font-size: 4em;
    font-weight: bold;
    animation: glow 3s ease-in-out infinite alternate;
  }

  h2 {
    font-size: 2.5em;
    margin-top: 0.5em;
  }

  h3 {
    font-size: 2em;
    color: #f06292;
    margin-top: 0.3em;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #fff, 0 0 30px #ff80ab, 0 0 60px #f06292; }
    to { text-shadow: 0 0 20px #fff, 0 0 40px #ec407a, 0 0 80px #e91e63; }
  }

  .footer {
    position: absolute;
    bottom: 8vh;
    width: 100%;
    font-size: 1.5em;
    color: #f48fb1;
  }

  canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1;
  }
</style>
</head>
<body>
  <canvas id="fireworks"></canvas>

  <h1>üíñ Ch√∫c M·∫π 20-10 üíñ</h1>
  <h2>vui v·∫ª, h·∫°nh ph√∫c</h2>
  <h3>v√† m√£i m√£i xinh ƒë·∫πp! üíê</h3>
  <div class="footer">‚Äî Con th∆∞∆°ng M·∫π nhi·ªÅu ‚Äî</div>

  <!-- üéµ Nh·∫°c n·ªÅn -->
  <audio id="bgm" preload="auto" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/02/28/audio_8c96b9a6c2.mp3?filename=romantic-piano-melody-140929.mp3" type="audio/mpeg">
  </audio>

  <script>
  // ===== Hi·ªáu ·ª©ng ph√°o hoa tr√°i tim lung linh =====
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  let w, h;

  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  function heartShape(t) {
    const x = 16 * Math.pow(Math.sin(t), 3);
    const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
    return [x, y];
  }

  class Particle {
    constructor(x, y, color, size, glow) {
      this.x = x; this.y = y;
      this.vx = (Math.random() - 0.5) * 2;
      this.vy = (Math.random() - 0.5) * 2;
      this.alpha = 1;
      this.size = size;
      this.color = color;
      this.glow = glow;
    }
    draw() {
      ctx.globalCompositeOperation = 'lighter';
      const grad = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 4);
      grad.addColorStop(0, this.color);
      grad.addColorStop(1, 'transparent');
      ctx.fillStyle = grad;
      ctx.globalAlpha = this.alpha;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
      ctx.fill();
    }
    update() {
      this.x += this.vx;
      this.y += this.vy;
      this.alpha -= 0.01;
    }
  }

  let particles = [];

  function createHeartFirework() {
    const cx = Math.random() * w;
    const cy = Math.random() * h * 0.4 + h * 0.2;
    const color = `hsl(${Math.random() * 360}, 100%, 70%)`;
    const core = new Particle(cx, cy, '#fff', 3, true);
    particles.push(core);

    for (let t = 0; t < Math.PI * 2; t += 0.08) {
      const [hx, hy] = heartShape(t);
      const scale = 22 + Math.random() * 6;
      const px = cx + hx * scale;
      const py = cy + hy * scale;
      particles.push(new Particle(px, py, color, Math.random() * 3 + 1, false));
    }
  }

  function animate() {
    ctx.fillStyle = 'rgba(255, 240, 245, 0.25)';
    ctx.fillRect(0, 0, w, h);
    particles.forEach((p, i) => {
      p.update();
      p.draw();
      if (p.alpha <= 0) particles.splice(i, 1);
    });
    requestAnimationFrame(animate);
  }

  setInterval(createHeartFirework, 1000);
  animate();

  // ===== Nh·∫°c fade-in / fade-out =====
  const bgm = document.getElementById("bgm");
  let fadeInterval;

  function fadeIn(audio, duration=4000){
    audio.volume=0;
    const step=0.02;
    clearInterval(fadeInterval);
    fadeInterval=setInterval(()=>{
      if(audio.volume<1){
        audio.volume=Math.min(1, audio.volume+step);
      } else clearInterval(fadeInterval);
    }, duration*step);
  }

  function fadeOut(audio, duration=3000){
    const step=0.02;
    clearInterval(fadeInterval);
    fadeInterval=setInterval(()=>{
      if(audio.volume>0){
        audio.volume=Math.max(0, audio.volume-step);
      } else{
        clearInterval(fadeInterval);
        audio.pause();
      }
    }, duration*step);
  }

  (async()=>{
    try{
      await bgm.play();
      fadeIn(bgm);
    }catch{
      window.addEventListener("pointerdown",()=>{
        bgm.play().then(()=>fadeIn(bgm));
      },{once:true});
    }
  })();

  window.addEventListener("beforeunload",()=>fadeOut(bgm));
  </script>
</body>
</html>
